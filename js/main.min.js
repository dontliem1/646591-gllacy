var link=document.querySelector(".js-modal"),modal=document.querySelector(".modal"),close=modal.querySelector(".modal-close"),form=modal.querySelector("form"),nameControl=modal.querySelector("[name=name]"),mailControl=modal.querySelector("[name=mail]"),questionControl=modal.querySelector("textarea"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("mailControl")}catch(o){isStorageSupport=!1}link.addEventListener("click",function(o){o.preventDefault(),modal.classList.add("modal-show"),storage?(nameControl.value=storage,storage?(mailControl.value=storage,questionControl.focus()):mailControl.focus()):nameControl.focus()}),close.addEventListener("click",function(o){o.preventDefault(),modal.classList.remove("modal-show"),form.classList.remove("modal-error")}),window.addEventListener("keydown",function(o){27===o.keyCode&&(o.preventDefault(),modal.classList.contains("modal-show")&&(modal.classList.remove("modal-show"),form.classList.remove("modal-error")))}),form.addEventListener("submit",function(o){mailControl.value&&questionControl.value?isStorageSupport&&(localStorage.setItem("nameControl",nameControl.value),localStorage.setItem("mailControl",mailControl.value)):(o.preventDefault(),form.classList.remove("modal-error"),form.offsetWidth=form.offsetWidth,form.classList.add("modal-error"),console.log("Введите электронную почту и вопрос."))});